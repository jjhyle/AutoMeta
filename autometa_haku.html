<html>
   <head>
      <title>
         Gallery search
      </title>
    

 <!--  Tässä nettiosoite, josta kayttajat-malliohjelma -->
 <!--     https://hdtuto.com/article/php-ajax-autocomplete-search-from-database-example  -->


        <!-- (1) include the jquery css and javascript we need (load them from google urls) -->
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
   
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>

         <meta name="viewport" content="width=device-width, initial-scale=1.0">  
       <meta charset="utf-8">
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" 
       integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> 
   
      
       <style type="text/css">
         .gst20{
            margin-top:20px;
         }
         #hdTuto_search{
            display: none;
         }
         .list-gpfrm-list a{
            text-decoration: none !important;
         }
         .list-gpfrm li{
            cursor: pointer;
            padding: 4px 0px;
         }
         .list-gpfrm{
            list-style-type: none;
             background: #d4e8d7;
         }
         .list-gpfrm li:hover{
            color: white;
            background-color: #3d3d3d;
         }
      </style>
   
      </head>


   <body>
      <script language = "javascript" type = "text/javascript">
         //<-- 
         //Browser Support Code
         function ajaxFunction() {
            var ajaxRequest;  // The variable that makes Ajax possible!
            
            try {        
               // Opera 8.0+, Firefox, Safari
               ajaxRequest = new XMLHttpRequest();
            } catch (e) {
               
               // Internet Explorer Browsers
               try {
                  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
               } catch (e) {
                  
                  try {
                     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                  } catch (e) {
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
            }
          
            // Create a function that will receive data
            // sent from the server and will update
            // div section in the same page.
            ajaxRequest.onreadystatechange = function() {
            
               if(ajaxRequest.readyState == 4) {
                  var ajaxDisplay = document.getElementById('ajaxDiv');
                  ajaxDisplay.innerHTML = ajaxRequest.responseText;
               }
            }
            
            // Now get the value from user and pass it to
            // server script.
            var querystr = document.getElementById('querystr').value;
                        
            ajaxRequest.open("GET", "autometa_haku.php?querystr=" + querystr, true);
            ajaxRequest.send(null); 
         }
          //-->
/*
         //<-- 
         //Browser Support Code
          function ajaxFunction2() {
            var ajaxRequest;  // The variable that makes Ajax possible!
            
            try {        
               // Opera 8.0+, Firefox, Safari
               ajaxRequest = new XMLHttpRequest();
            } catch (e) {
               
               // Internet Explorer Browsers
               try {
                  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
               } catch (e) {
                  
                  try {
                     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                  } catch (e) {
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
            }
          
            // Create a function that will receive data
            // sent from the server and will update
            // div section in the same page.
            ajaxRequest.onreadystatechange = function() {
            
               if(ajaxRequest.readyState == 4) {
                  var ajaxDisplay = document.getElementById('ajaxDiv2');
                  ajaxDisplay.innerHTML = ajaxRequest.responseText;
               }
            }
            
            // Now get the value from user and pass it to
            // server script.
            var sana = document.getElementById('sana').value;
                        
            ajaxRequest.open("GET", "autometa_haku2.php?sana=" + sana, true);
            ajaxRequest.send(null); 
         }
*/
/*
         function ajaxFunction2() {

// Single Select
$( "#sana" ).autocomplete({
 source: function( request, response ) {
  // Fetch data
  $.ajax({
   url: "autometa_haku2.php",
   type: 'get',
   dataType: "json",
   data: {
    search: request.sana
   },
   success: function( data ) {
    response( data );
   }
  });
 },
 select: function (event, ui) {
  // Set selection
  $('#sana').val(ui.item.label); // display the selected text
 // $('#selectuser_id').val(ui.item.value); // save selected id to input
  return false;
 }
});

};
*/


//function split( val ) {
//  return val.split( /,\s*/ );
//}
//function extractLast( term ) {
//  return split( term ).pop();
//}    

/*
function ajaxFunction2() {
    // (a) put default input focus on the state field
  $(document).ready(function(){
    $('#sana').focus();
  });

  // (b) jquery ajax autocomplete implementation
  $(document).ready(function() {
    // tell the autocomplete function to get its data from our php script
    $('#sana').autocomplete({
      source: "autometa_haku2.php",
      select: function( event, ui ) {
            event.preventDefault();
   //         $("#sana").val(ui.keywords.keyword);
        }
    });
  });
}
*/
/*
$.ajax({
    url: "autometa_haku2.php",
    dataType: "json",
    data: {
        searchText: request.term
    },
    success: function (data) {
        response($.map(data.item, function (item) {
            return {
                label: item.name,
                value: item.id
            };
        }));
    }
});
}
*/

          //-->
          
// function ajaxFunction3() {
// <script type="text/javascript">
	$(document).ready(function(){
	//Autocomplete search using PHP, MySQLi, Ajax and jQuery
		//generate suggestion on keyup
		$('#querystr').keyup(function(e){
			e.preventDefault();
			var form = $('#hdTutoForm').serialize();
			$.ajax({
				type: 'POST',
				url: 'autometa_haku2.php',
				data: form,
				dataType: 'json',
				success: function(response){
					if(response.error){
						$('#hdTuto_search').hide();
					}
					else{
						$('#hdTuto_search').show().html(response.data);
					}
				}
			});
		});

		//fill the input
		$(document).on('click', '.list-gpfrm-list', function(e){
			e.preventDefault();
			$('#hdTuto_search').hide();
			var fullname = $(this).data('fullname');
			$('#querystr').val(fullname);
		});
	});
// }
      </script>

 <!--     <form name = 'myForm'>

           <p style="font-size:30px;">  -->
           
        <!--    Search pictures from gallery, give a keyword: <input type = 'text' id = 'sana' onkeypress="ajaxFunction2()"/> <br />
            <div id = 'ajaxDiv2'>Your result</div>
            </p>
         -->
       <!--     <form id ="hdTutoForm" method="POST" action="">  -->

       <!--     <div class="input-gpfrm input-gpfrm-lg">                      
              <label for="sana">Search pictures from gallery, give a keyword:</label>
                <input type = 'text' id = 'sana' name = 'sana' placeholder='Search' class="autocomplete" onkeypress="ajaxFunction3()"/> 
       -->
       <!--     <label for="sana">Search pictures from gallery, give a keyword:</label>
                <input type = 'text' id = 'sana' name = 'sana' placeholder='Search' class="form-control" onkeypress="ajaxFunction3()"/> 
            </form>
            <ul class="list-gpfrm" id="hdTuto_search"></ul>
               </p>
            -->
     <!--       <label>Search pictures from gallery, give a keyword:</label>
               <div class="input-gpfrm input-gpfrm-lg">
               <input type="text" id="querystr" name="querystr" class="form-control" placeholder="Search Name" aria-describedby="basic-addon2" onkeypress="ajaxFunction3()"/>
              </div>
            </form>
            <ul class="list-gpfrm" id="hdTuto_search"></ul>
            </p>
         </form>
      -->


         <div class="container">
               <h1 class="text-center gst20">Search pictures from gallery, give a keyword:</h1>      
               <div class="row justify-content-center gst20">          
                  <div class="col-sm-6">            
                     <form id="hdTutoForm" method="POST" action="">            
                        <div class="input-gpfrm input-gpfrm-lg">            
                             <input type="text" id="querystr" name="querystr" class="form-control" placeholder="Search keyword" aria-describedby="basic-addon2">            
                        </div>            
                     </form>            
                     <ul class="list-gpfrm" id="hdTuto_search"></ul>            
                  </div>            
               </div>            
            </div>

        <!--    </p>  -->

        <form name = 'myForm'>

            <style>
            .button {
               background-color: #4CAF50; /* Green */
               border: none;
               color: white;
               padding: 10px 20px;
               text-align: center;
               text-decoration: none;
               display: inline-block;
               font-size: 16px;
               }
             </style>
              <button type="button" class="btn btn-primary" onclick="ajaxFunction()">Search</button>
    <!--        <input type = 'button' class="button" onclick = 'ajaxFunction()' value = 'Search'/>   -->
      
       </form>

      <div id = 'ajaxDiv'>Your result will display here</div>
      
   </body>
</html>