<html>
   <head>
      <title>
         Gallery search
      </title>
        <!-- (1) include the jquery css and javascript we need (load them from google urls) -->
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

   </head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <body>
      <script language = "javascript" type = "text/javascript">
         //<-- 
         //Browser Support Code
         function ajaxFunction() {
            var ajaxRequest;  // The variable that makes Ajax possible!
            
            try {        
               // Opera 8.0+, Firefox, Safari
               ajaxRequest = new XMLHttpRequest();
            } catch (e) {
               
               // Internet Explorer Browsers
               try {
                  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
               } catch (e) {
                  
                  try {
                     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                  } catch (e) {
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
            }
          
            // Create a function that will receive data
            // sent from the server and will update
            // div section in the same page.
            ajaxRequest.onreadystatechange = function() {
            
               if(ajaxRequest.readyState == 4) {
                  var ajaxDisplay = document.getElementById('ajaxDiv');
                  ajaxDisplay.innerHTML = ajaxRequest.responseText;
                //  ajaxDisplay.innerHTML = ajaxRequest.responseXML;
               }
            }
            
            // Now get the value from user and pass it to
            // server script.
            var sana = document.getElementById('sana').value;
                        
            ajaxRequest.open("GET", "autometa_haku.php?sana=" + sana, true);
            ajaxRequest.send(null); 
         }
          //-->
/*
         //<-- 
         //Browser Support Code
          function ajaxFunction2() {
            var ajaxRequest;  // The variable that makes Ajax possible!
            
            try {        
               // Opera 8.0+, Firefox, Safari
               ajaxRequest = new XMLHttpRequest();
            } catch (e) {
               
               // Internet Explorer Browsers
               try {
                  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
               } catch (e) {
                  
                  try {
                     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                  } catch (e) {
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
            }
          
            // Create a function that will receive data
            // sent from the server and will update
            // div section in the same page.
            ajaxRequest.onreadystatechange = function() {
            
               if(ajaxRequest.readyState == 4) {
                  var ajaxDisplay = document.getElementById('ajaxDiv2');
                  ajaxDisplay.innerHTML = ajaxRequest.responseText;
               }
            }
            
            // Now get the value from user and pass it to
            // server script.
            var sana = document.getElementById('sana').value;
                        
            ajaxRequest.open("GET", "autometa_haku2.php?sana=" + sana, true);
            ajaxRequest.send(null); 
         }
*/

         $( function ajaxFunction2() {

// Single Select
$( "#sana" ).autocomplete({
 source: function( request, response ) {
  // Fetch data
  $.ajax({
   url: "autometa_haku2.php",
   type: 'get',
   dataType: "json",
   data: {
    search: request.sana
   },
   success: function( data ) {
    response( data );
   }
  });
 },
 select: function (event, ui) {
  // Set selection
  $('#sana').val(ui.item.label); // display the selected text
 // $('#selectuser_id').val(ui.item.value); // save selected id to input
  return false;
 }
});

});


//function split( val ) {
//  return val.split( /,\s*/ );
//}
//function extractLast( term ) {
//  return split( term ).pop();
//}    

/*
function ajaxFunction2() {
    // (a) put default input focus on the state field
  $(document).ready(function(){
    $('#sana').focus();
  });

  // (b) jquery ajax autocomplete implementation
  $(document).ready(function() {
    // tell the autocomplete function to get its data from our php script
    $('#sana').autocomplete({
      source: "autometa_haku2.php",
      select: function( event, ui ) {
            event.preventDefault();
   //         $("#sana").val(ui.keywords.keyword);
        }
    });
  });
}
*/
/*
$.ajax({
    url: "autometa_haku2.php",
    dataType: "json",
    data: {
        searchText: request.term
    },
    success: function (data) {
        response($.map(data.item, function (item) {
            return {
                label: item.name,
                value: item.id
            };
        }));
    }
});
}
*/
          //-->

      </script>

      <form name = 'myForm'>

            <p style="font-size:30px;">
           
        <!--    Search pictures from gallery, give a keyword: <input type = 'text' id = 'sana' onkeypress="ajaxFunction2()"/> <br />
            <div id = 'ajaxDiv2'>Your result</div>
            </p>
         -->

            <label for="sana">Search pictures from gallery, give a keyword:</label>
                <input type = 'text' id = 'sana' name = 'sana' placeholder='Search' autocomplete onkeypress="ajaxFunction2()"/> 
     <!--       <div id = 'ajaxDiv2'>Your result</div> -->
    
            <style>
            .button {
               background-color: #4CAF50; /* Green */
               border: none;
               color: white;
               padding: 10px 20px;
               text-align: center;
               text-decoration: none;
               display: inline-block;
               font-size: 16px;
               }
             </style>
              
            <input type = 'button' class="button" onclick = 'ajaxFunction()' value = 'Search'/>
      
      </form>

      <div id = 'ajaxDiv'>Your result will display here</div>
      
   </body>
</html>